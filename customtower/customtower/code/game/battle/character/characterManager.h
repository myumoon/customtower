//=============================================================================
/*!	@file	characterManager.h

	@brief	キャラクターマネージャー

	@author	ryunosuke ide
	@date	2013.06.02
*/
//=============================================================================


#ifndef __CHARACTER_MANAGER_H__
#define __CHARACTER_MANAGER_H__

#include "character.h"
#include "game/battle/manager/manager.h"
#include "game/battle/earth/earthObject.h"


namespace game {

namespace battle {

class CharacterGenerator;

//=============================================================================
/*!
								キャラ管理
*/
//=============================================================================
class CharacterManager : public Manager<Character>, public EarthObject {
public:
	//-----------------------型定義--------------------------


	//----------------------静的メンバ-----------------------
	
	
	//-----------------------メソッド------------------------

	//===========================================================================
	/*!	@brief		初期化
	*/
	//===========================================================================
	void				Initialize( void );

	//===========================================================================
	/*!	@brief		終了
	*/
	//===========================================================================
	void				Terminate( void );

	//===========================================================================
	/*!	@brief		追加
	*/
	//===========================================================================
	virtual void		Add( Character* character );

	//===========================================================================
	/*!	@brief		削除するキャラクターの追加
	*/
	//===========================================================================
	virtual void		Remove( Character* character );

	//===========================================================================
	/*!	@brief		全削除
	*/
	//===========================================================================
	virtual void		DeleteAll( void );

	//===========================================================================
	/*!	@brief		実際の削除
	*/
	//===========================================================================
	void				RemoveReservedCharacters( void );

	//===========================================================================
	/*!	@brief		重力更新
	*/
	//===========================================================================
	virtual void		UpdatePosition( void );

	//===========================================================================
	/*!	@brief		前回位置セット
	*/
	//===========================================================================
	void				PushPrevPos( void );

	//===========================================================================
	/*!	@brief		移動
	*/
	//===========================================================================
	void				UpdateMove( void );

	//===========================================================================
	/*!	@brief		攻撃
	*/
	//===========================================================================
	void				UpdateAttack( void );
	
private:
	//-----------------------メソッド------------------------
	void	_Init( void );
	void	_Term( void );

	//----------------------メンバ変数-----------------------
	std::vector<Character*>			m_characters;			//!< 更新キャラクタ
	std::vector<Character*>			m_removeCharacters;		//!< 削除予定キャラクター
	

public:
	//-------------コンストラクタ・デストラクタ--------------
			CharacterManager();
	virtual~CharacterManager();
};


}	// namespace battle
	
}	// namespace game



#endif  // __CHARACTER_MANAGER_H__